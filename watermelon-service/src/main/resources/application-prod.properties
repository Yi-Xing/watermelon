# 环境标识
env=prod
debug=false

# Tomcat 配置
server.port=8080
server.servlet.context-path=/
server.tomcat.max-connections=500
server.tomcat.threads.max=200
server.tomcat.connection-timeout=20000

# 日志配置
logging.config=classpath:log4j2-prod.xml

# MySQL 数据源配置 (生产环境)
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://your-prod-mysql-host:3306/watermelon_prod?useUnicode=true&characterEncoding=utf-8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=Asia/Shanghai
spring.datasource.username=${DB_USERNAME:watermelon_prod}
spring.datasource.password=${DB_PASSWORD:your_prod_password}

# Druid 连接池配置 (生产环境优化)
spring.datasource.druid.initial-size=20
spring.datasource.druid.min-idle=20
spring.datasource.druid.max-active=100
spring.datasource.druid.max-wait=60000
spring.datasource.druid.time-between-eviction-runs-millis=60000
spring.datasource.druid.min-evictable-idle-time-millis=300000
spring.datasource.druid.validation-query=SELECT 1 FROM DUAL
spring.datasource.druid.test-while-idle=true
spring.datasource.druid.test-on-borrow=false
spring.datasource.druid.test-on-return=false
spring.datasource.druid.filters=stat,wall,slf4j
spring.datasource.druid.stat-view-servlet.enabled=false
spring.datasource.druid.web-stat-filter.enabled=true
spring.datasource.druid.web-stat-filter.url-pattern=/*
spring.datasource.druid.web-stat-filter.exclusions=*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*

# MyBatis Plus 配置
mybatis-plus.configuration.map-underscore-to-camel-case=true
mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.nologging.NoLoggingImpl
mybatis-plus.mapper-locations=classpath*:/mapper/**/*.xml
mybatis-plus.type-aliases-package=top.fblue.watermelon.infrastructure.po

# MyBatis Plus 逻辑删除配置
mybatis-plus.global-config.db-config.logic-delete-field=isDeleted
mybatis-plus.global-config.db-config.logic-delete-value=1
mybatis-plus.global-config.db-config.logic-not-delete-value=0

# MyBatis Plus ID生成策略
mybatis-plus.global-config.db-config.id-type=auto

# Redis配置 (生产环境)
spring.data.redis.host=${REDIS_HOST:your-prod-redis-host}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.timeout=30000ms
spring.data.redis.password=${REDIS_PASSWORD:your_redis_password}
spring.data.redis.lettuce.pool.min-idle=10
spring.data.redis.lettuce.pool.max-active=50
spring.data.redis.lettuce.pool.max-wait=-1ms
spring.data.redis.lettuce.pool.max-idle=20
